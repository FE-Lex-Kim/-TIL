# 이미지 사이즈 최적화

<br>

## 이미지 사이즈 최적화 분석 해보기

![이미지 사이즈 최적화 분석](./../Images/이미지%20최적화/이미지%20최적화-1.png)

**Properly size images 은 이미지 압축을 통해서 이미지 리소스 로드 타임을 최적화 하는 것을 의미한다.**

<br>

**Resource Size**는 현재 페이지의 이미지의 크기를 말한다.

**Potential Savings**는 해당 하는 이미지의 크기를 최적화 하면 얼마나 사이즈를 줄일 수 있는지 보여준다.

<br>

렌더 사이즈는 픽셀 비율도 고려해서 측정한다.

만약 렌더 사이즈가 실제 사이즈보다 4KiB보다 더 작다면, 해당 이미지는 분석했을때 결과로 실패가 나온다.

<br>

![이미지 사이즈 최적화 분석](./../Images/이미지%20최적화/이미지%20최적화-2.png)

해당 이미지 태그위에 커서를 호버하면 **Rendered size**와 **Intrinsic size** 항목이 나온다.

<br>

**Rendered size**는 페이지에서 해당 이미지를 사용했을때 픽셀 사이즈를 말한다.

**Intrinsic size**는 이미 리소스의 원래 기존의 이미지 픽셀 사이즈를 말한다.

<br>

원래 사이즈는 1200 x 1200 px인데 렌더했을때는 120 x 120 px이다.

기존의 사이즈 보다 100배 오버해서 이미지를 사용하고 있다는 의미이다.

<br>

화면에 보여지는 이미지 사이즈에 해당하는 정확한 이미지 크기를 가져와야 하는게 맞을까?

레티나 기준으로 해서는 픽셀을 더 자세히 표현가능 하기 때문에 2배정도의 이미지 크기를 가져오는게 품질에 더 좋다.(240 x 240 px이 좋아보인다.)

<br>

## 이미지 사이즈 최적화 방법

<br>

### 첫번째. 더 큰 이미지 사용하지 않기

가장 이상적인 방법은 페이지에서 유저의 스크린에서 렌더되는 이미지 보다 더 큰것을 사용하지 않는것이다.

더 큰 이미지는 낭비되는 bytes과 페이지 로딩에 악영향을 준다.

<br>

### 두번째. 반응형 이미지 사용하기

가장 최고의 방법은 알맞은 이미지 사이즈를 제공하는 것인, 반응형 이미지를 제공하는 것이다.

반응형 이미지를 제공하기 위해서 각 버전별로 다양한 이미지를 제공해준다.

HTML, CSS에서 뷰포트 면적을 고려해서 미디어 쿼리별로 구체적인 이미지 사이즈를 제공하는 것이다.

<br>

[gulp-responsive](https://www.npmjs.com/package/gulp-responsive) or [responsive-images-generator](https://www.npmjs.com/package/responsive-images-generator) 과 같은 라이브러리로 반응형 이미지를 더 쉽게 구현할 수 도 있다.

<br>

[반응형 이미지에 대한 더 자세한 내용](https://web.dev/serve-responsive-images/)

<br>

### 세번째. 최적화 이미지 CDN 사용하기

**[Imgix](https://imgix.com/)**와 같은 라이브러리를 통해서 최적화된 이미지 크기만큼 줄여서 전달할 수 있다.

<br>

**Imgix는 CDN을 통해서 이미지 사이즈를 최적화 하고 캐싱한뒤 클라이언트에게 전달한다.**

<br>

클라이언트는 imgix CDN에 요청한뒤 CDN은 실제 이미지를 가지고 있는 서버에 요청한다.

이후 CDN은 원본 이미지를 받은 후, 캐싱한뒤, 클라이언트에서 요청한 이미지 사이즈로 최적화 해서 돌려보내준다.

<br>

다른 클라이언트들도 이제 이미지를 요청하면 근처 CDN을 통해 요청을 하게된다.

CDN 서버는 캐싱되어 있는지 확인하고 이전에 캐싱되어 있으면 실제 서버에 요청하지 않고 CDN 서버에서 전달해준다.

따라서 실제 서버에 요청을 하지 않으니 많은 트레픽이 발생하지 않아 **로딩 성능에 뛰어나다.**

<br>

참고

- [https://web.dev/uses-responsive-images/?utm_source=lighthouse&utm_medium=devtools](https://web.dev/uses-responsive-images/?utm_source=lighthouse&utm_medium=devtools)
- 인프런 프론트엔드 개발자를 위한, 실전 웹 성능 최적화
- [https://imgix.com/?ref=unsplash](https://imgix.com/?ref=unsplash)
- [https://web.dev/serve-responsive-images/](https://web.dev/serve-responsive-images/)
