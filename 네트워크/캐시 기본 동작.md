# 캐시

<br>

## 캐시 기본 동작

<br>

예제) 클라이언트가 서버에게 이미지 1.1M을 요청하는 프로세스

### 캐시가 없을때 요청, 응답 프로세스

<br>

최초 요청

1. 서버에게 이미지 요청
2. 서버가 이미지 1.1M(HTTP 헤더 0.1M, 바디 1M) 응답

<br>

두 번째 재요청

1. 서버에게 이미지 요청
2. 서버가 이미지 1.1M(HTTP 헤더 0.1M, 바디 1M) **다시 응답**

<br>

정리

- **데이터가 변경되지 않아도 계속 네트워크를 통해 데이터를 다운**받아야 한다.
- **인터넷 네트워크**는 매우 느리고 비싸다.
- **브라우저 로딩 속도**가 느리다.
- **느린 사용자 경험**

<br>

### 캐시가 적용된 요청, 응답 프로세스

![캐시 기본 동작](./../Images/캐시%20기본%20동작/캐시%20기본%20동작-1.png)

<br>

최초 요청

1. 서버에게 이미지 요청
2. 서버가 이미지 1.1M 응답
   - HTTP 헤더에 `cache-control: max-age=60`을 적용
   - `cache-control` → 캐쉬 처리에 대한 요청을 보냄
   - `max-age=60` 캐쉬가 브라우저 캐시에 저장 가능 시간 60초

<br>

두 번째 재요청

1. 클라이언트가 이미지에 대한 요청
2. 브라우저 캐시에서 먼저 요청에 대한 정보가 있는지 탐색
3. 있으면 유효시간 확인후 60초 이내에 요청한것을 확인하고 이곳에서 가져와서 사용
4. 없으면 다시 서버에 요청

<br>

정리

- 캐시 덕분에 캐시 가능 시간동안 **네트워크를 사용하지 않아도됨**
- **비싼 네트워크 사용량을 줄일 수 있다.**
- 브라우저 **로딩 속도가 매우 빠르다.**
- **빠른 사용자 경험**

<br>

### 하지만.

**만약 캐시 유효기간이 초과 했지만,** **실제로 서버에서는 해당 데이터에 대한 내용이 변한것이 하나도 없다면?**

<br>

그래도 똑같이 서버에 그 데이터를 요청하고 **데이터 값을 모두 다 가져온다.(단지 캐시 유효기간이 초과했다고 서버에서 모든 데이터를 가져옴)**

<br>

이렇게 불필요한 요청을 다시한번 막는 방법이 있다.

그것은 **검증 헤더와 조건부 요청 이다.(2가지 방법이 있다.)**

<br>

다음 챕터에서..

<br>

참고

- 모든 개발자를 위한 HTTP 웹 기본지식 인프런 강의
