# Transport 계층 정의 및 TCP / UDP

<br>

## Transport 계층

End to End 서비스, 서비스와 서비스간의 연결을 관리한다.

<br>

TCP 와 UDP를 가장많이 사용한다.

소켓을 통한 통신을 한다.

<br>

### Port

전송 계층에서 사용되며 특정 프로세스를 구분하는 단위이다.

<br>

0 ~ 65535

- 0 ~ 1023 : well-known port, 다양한 표준 서비스들은 이곳에 속해져있다.
- 1024 ~ 49151 : registed port
- 49152 ~ 65535 : dynamic port, 랜덤하게 지정됨

<br>

ex) 웹 TCP 80포트, FTP TCP 21포트

<br>

과정

1. IP를 통해서 통신을한다.
2. TCP 또는 UDP 프로토콜인지 확인한다.
3. 어떤 Port를 사용하는지 확인한다.
4. 어떠한 Process를 사용하는지 확인

<br>

## TCP

TCP(Transmission Control Protocl), 전송 제어 프로토콜

인터넷을 구성하는 핵심 프로토콜

<br>

특징

- 신뢰성을 기반으로 데이터를 에러 없이 전송, 1 : 1 통신
- 연결지향, Connection-oriented
- 패킷의 상태 정보를 확인하고 유지
- 에러 발생시 재전송을 요청하고 에러를 복구한다.

<br>

### TCP 제어 플래그

6가지로 구성되며 활성화 되는 값을 비트 '1'로 표현한다.

<br>

1. URG : 긴급함을 알림, 긴급 데이터로 우선순위를 높여 먼저 송신
2. ACK : 확인, 수신측에서 송신된 패킷을 정상적으로 받았음을 알림
3. PSH(push) : 버퍼링 되지 않고 바로 송신,
   - window size보고 데이터를 나눠서 보내는데 그 버퍼링 되는 시간도 못기다린다면 바로 보내야할때 사용
4. RST(reset) : 비정상 상황에서 연결을 끊음
   - 갑자기 연결이 끊어지면 RST을 보낸다.
5. SYN : 연결을 맺기 위해 보내는 패킷
   - 가장 먼저 연결을 하기 위해 보내지는, start 패킷이라고 보내면된다.
6. FIN : 정상 종료, 송신측에서 수신측에 연결 종료 요청

<br>

## UDP

User Datagram protocol

<br>

특징

- 신뢰성은 낮으나 데이터 전송이 빠르다.
- 송신측은 일반적으로 데이터를 보내고 확인 안한다. 1 : n 통신 가능
- Connectionless(연결하지 않음)
- 재전송 불가
- 실시간 데이터 전송에 적합
  - 스트리밍 서브시의 경우 전송 문제가 발생해도 재전송 보다는 실시간 데이터 전송이 중요

무결성 : 중간에 변경이 되었는지 확인하는것.(보안?)

<br>

## 비교

TCP vs UDP

TCP

- 순서확인 가능
- 신뢰성 높음(여러가지 flag 확인가능)
- 연결성 있음
- 흐름과 혼잡 제어 가능하다.

<br>

UDP

- 순서 확인 불가능
- 신뢰성 낮음
- 연결되어있지 않음
- 제어가 불가능
- 속도 빠름

<br>

## 정리

- Transport 계층은 소프트웨어 레벨로 End to End 서비스로 부르며 커넥션을 관리
- 대표적인 프로토콜로 TCP 와 UDP가 있다.
- 포트는 전송 계층에서 사용되는 특정 프로세스를 구분하는 단위로 0 ~ 65535이다.
- UDP는 1 : n 가능 및 비 신뢰성 통신
- TCP는 1 : 1 신뢰성 기반 통신

참고

- 패스트 캠퍼스 네트워크 강의
